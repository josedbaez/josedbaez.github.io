<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    

    
    <title>Allows users to log in to a Sitecore 9 site using federated authentication | Jose Dominguez</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="openid,sso,authentication,facebook,google" />
    
    <meta name="description" content="How to implement federated authentication on sitecore 9 to allow visitors to log in to your site using their google or facebook accounts.">
<meta name="keywords" content="openid,sso,authentication,facebook,google">
<meta property="og:type" content="article">
<meta property="og:title" content="Allows users to log in to a Sitecore 9 site using federated authentication">
<meta property="og:url" content="http://josedbaez.com/2018/03/sitecore9-sso/index.html">
<meta property="og:site_name" content="Jose Dominguez">
<meta property="og:description" content="How to implement federated authentication on sitecore 9 to allow visitors to log in to your site using their google or facebook accounts.">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://josedbaez.com/images/sitecore9-sso.jpg">
<meta property="og:updated_time" content="2018-12-15T02:06:43.611Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Allows users to log in to a Sitecore 9 site using federated authentication">
<meta name="twitter:description" content="How to implement federated authentication on sitecore 9 to allow visitors to log in to your site using their google or facebook accounts.">
<meta name="twitter:image" content="http://josedbaez.com/images/sitecore9-sso.jpg">
    

    
        <link rel="alternate" href="/atom.xml" title="Jose Dominguez" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/3.3.1/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83689815-1', 'auto');
ga('send', 'pageview');

</script>
    
    


</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">C#, .net, sitecore &amp; some other stuff</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://josedbaez.com"></form>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Sitecore/">Sitecore</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/Sitecore/Authentication/">Authentication</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-sitecore9-sso" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        Allows users to log in to a Sitecore 9 site using federated authentication
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2018/03/sitecore9-sso/" class="article-date">
            <time datetime="2018-03-16T00:00:00.000Z" itemprop="datePublished">2018-03-16</time>
        </a>
    </div>

		

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/authentication/">authentication</a>, <a class="tag-link" href="/tags/facebook/">facebook</a>, <a class="tag-link" href="/tags/google/">google</a>, <a class="tag-link" href="/tags/openid/">openid</a>, <a class="tag-link" href="/tags/sso/">sso</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <h2 id=""><a href="#" class="headerlink" title=""></a><img class="hero-img" src="/images/sitecore9-sso.jpg" alt="Sitecore 9 SSO"></h2><p>How to implement federated authentication on sitecore 9 to allow visitors to log in to your site using their google or facebook accounts.<br><a id="more"></a></p>
<p><em>Versions used: Sitecore Experience Platform 9.0 rev. 171219 (9.0 Update-1).</em></p>
<p><strong>Update/Warning:</strong><br>Updated code so it passes the IdentityProvider name to the middleware so you can use whatever name you want instead of default one. <code>AuthenticationType = IdentityProvider.Name</code>.</p>
<p>On a <a href="http://josedbaez.com/2017/09/sitecore-okta-login/">previous post</a> I explained how to implement federated authentication on Sitecore 8 (using Okta). Things have changed on sitecore 9 and the implementation is easier than back then.</p>
<p>Sitecore 9 comes with an OWIN implementation to delegate authentication to other providers. Most of the job required to achieve federated authentication is through configuration files. In this post I will outline how to implement federated authentication with Facebook and Google so visitors can log in to your sitecore 9 site. <a href="https://github.com/josedbaez/sitecore9sso" target="_blank" rel="noopener">Source code here.</a></p>
<p>Sitecore will automatically render redirect buttons on the login page if you add your provider to <code>admin</code> and <code>shell</code> sites. As we want our providers to handle the <code>website</code> site instead, we will create a rendering to render the redirect links on the <code>NoAccessUrl</code> page.</p>
<p>The steps to implement federated authentication are:</p>
<ul>
<li>Configure third-party (facebook and google) providers</li>
<li>Enable and configure providers</li>
<li>Create providers’ processors to map claims received to Sitecore user properties and roles</li>
<li>Create rendering to render login links and patch <code>NoAccessUrl</code> setting</li>
<li>Set the <code>authentication mode</code> to <code>None</code> in the Web.config <authentication mode="None"></authentication></li>
<li>Remove the FormsAuthentication module, like: <code>&lt;system.webServer&gt;&lt;modules&gt;&lt;remove name=&quot;FormsAuthentication&quot; /&gt;</code></li>
</ul>
<h2 id="Configure-third-party-facebook-and-google-providers"><a href="#Configure-third-party-facebook-and-google-providers" class="headerlink" title="Configure third-party (facebook and google) providers"></a>Configure third-party (facebook and google) providers</h2><p>Follow the following links to create and configure your applications: <a href="https://docs.microsoft.com/en-us/aspnet/core/security/authentication/social/facebook-logins?tabs=aspnetcore2x" target="_blank" rel="noopener">facebook</a> and <a href="https://docs.microsoft.com/en-us/aspnet/core/security/authentication/social/google-logins?tabs=aspnetcore2x" target="_blank" rel="noopener">google</a>.</p>
<p><em>IMPORTANT: Redirects URIs should be set to <a href="http://YOURSITE/signin-facebook" target="_blank" rel="noopener">http://YOURSITE/signin-facebook</a> and <a href="http://YOURSITE/signin-google" target="_blank" rel="noopener">http://YOURSITE/signin-google</a> respectively. This url is automatically generated by the middlewares being used here.</em></p>
<h2 id="Enable-and-configure-providers"><a href="#Enable-and-configure-providers" class="headerlink" title="Enable and configure providers"></a>Enable and configure providers</h2><p>First, enable federated authentication and add default services. A configuration sample file comes with sitecore, it sits under: <code>\App_Config\Include\Examples\Sitecore.Owin.Authentication.Enabler.config.example</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">xmlns:patch</span>=<span class="string">"http://www.sitecore.net/xmlconfig/"</span> <span class="attr">xmlns:role</span>=<span class="string">"http://www.sitecore.net/xmlconfig/role/"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sitecore</span> <span class="attr">role:require</span>=<span class="string">"Standalone or ContentDelivery or ContentManagement"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"FederatedAuthentication.Enabled"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">patch:attribute</span> <span class="attr">name</span>=<span class="string">"value"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">patch:attribute</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"NoAccessUrl"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">patch:attribute</span> <span class="attr">name</span>=<span class="string">"value"</span>&gt;</span>/no-access<span class="tag">&lt;/<span class="name">patch:attribute</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">services</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">register</span> <span class="attr">serviceType</span>=<span class="string">"Sitecore.Abstractions.BaseAuthenticationManager, Sitecore.Kernel"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">implementationType</span>=<span class="string">"Sitecore.Owin.Authentication.Security.AuthenticationManager, Sitecore.Owin.Authentication"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">lifetime</span>=<span class="string">"Singleton"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">register</span> <span class="attr">serviceType</span>=<span class="string">"Sitecore.Abstractions.BaseTicketManager, Sitecore.Kernel"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">implementationType</span>=<span class="string">"Sitecore.Owin.Authentication.Security.TicketManager, Sitecore.Owin.Authentication"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">lifetime</span>=<span class="string">"Singleton"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">register</span> <span class="attr">serviceType</span>=<span class="string">"Sitecore.Abstractions.BasePreviewManager, Sitecore.Kernel"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">implementationType</span>=<span class="string">"Sitecore.Owin.Authentication.Publishing.PreviewManager, Sitecore.Owin.Authentication"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">lifetime</span>=<span class="string">"Singleton"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">services</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">sitecore</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Note <code>NoAccessUrl</code> is being set to <code>/no-access</code>. This item needs to exist in sitecore and it’s where the rendering that will generate the login links needs to be added to.</p>
<p>Then, let’s add our providers and transformations. I’ll just show facebook’s <code>identityProvider</code> as google’s is pretty much the same. See full config <a href="https://github.com/josedbaez/sitecore9sso/blob/master/src/App_Config/Include/SSO/SitecoreSSO.Providers.config" target="_blank" rel="noopener">here.</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">xmlns:patch</span>=<span class="string">"http://www.sitecore.net/xmlconfig/"</span> <span class="attr">xmlns:role</span>=<span class="string">"http://www.sitecore.net/xmlconfig/role/"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sitecore</span> <span class="attr">role:require</span>=<span class="string">"Standalone or ContentDelivery or ContentManagement"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pipelines</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">owin.identityProviders</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">processor</span> <span class="attr">type</span>=<span class="string">"Sitecore9SSO.Pipelines.IdentityProviders.FacebookIdentityProvider, Sitecore9SSO"</span> <span class="attr">resolve</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">processor</span> <span class="attr">type</span>=<span class="string">"Sitecore9SSO.Pipelines.IdentityProviders.GoogleIdentityProvider, Sitecore9SSO"</span> <span class="attr">resolve</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">owin.identityProviders</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">pipelines</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">federatedAuthentication</span> <span class="attr">type</span>=<span class="string">"Sitecore.Owin.Authentication.Configuration.FederatedAuthenticationConfiguration, Sitecore.Owin.Authentication"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">identityProvidersPerSites</span> <span class="attr">hint</span>=<span class="string">"list:AddIdentityProvidersPerSites"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapEntry</span> <span class="attr">name</span>=<span class="string">"all"</span> <span class="attr">type</span>=<span class="string">"Sitecore.Owin.Authentication.Collections.IdentityProvidersPerSitesMapEntry, Sitecore.Owin.Authentication"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">sites</span> <span class="attr">hint</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">site</span>&gt;</span>website<span class="tag">&lt;/<span class="name">site</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">sites</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">identityProviders</span> <span class="attr">hint</span>=<span class="string">"list:AddIdentityProvider"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">identityProvider</span> <span class="attr">ref</span>=<span class="string">"federatedAuthentication/identityProviders/identityProvider[@id='Facebook']"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">identityProvider</span> <span class="attr">ref</span>=<span class="string">"federatedAuthentication/identityProviders/identityProvider[@id='Google']"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">identityProviders</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">externalUserBuilder</span> <span class="attr">type</span>=<span class="string">"Sitecore.Owin.Authentication.Services.DefaultExternalUserBuilder, Sitecore.Owin.Authentication"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"isPersistentUser"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">externalUserBuilder</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mapEntry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">identityProvidersPerSites</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">identityProviders</span> <span class="attr">hint</span>=<span class="string">"list:AddIdentityProvider"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">identityProvider</span> <span class="attr">id</span>=<span class="string">"Facebook"</span> <span class="attr">type</span>=<span class="string">"Sitecore.Owin.Authentication.Configuration.DefaultIdentityProvider, Sitecore.Owin.Authentication"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"name"</span>&gt;</span>$(id)<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">param</span> <span class="attr">desc</span>=<span class="string">"domainManager"</span> <span class="attr">type</span>=<span class="string">"Sitecore.Abstractions.BaseDomainManager"</span> <span class="attr">resolve</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">caption</span>&gt;</span>Log in with Facebook<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">icon</span>&gt;</span>/assets/fb.png<span class="tag">&lt;/<span class="name">icon</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">domain</span>&gt;</span>sitecore<span class="tag">&lt;/<span class="name">domain</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">transformations</span> <span class="attr">hint</span>=<span class="string">"list:AddTransformation"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transformation</span> <span class="attr">name</span>=<span class="string">"map role to idp"</span> <span class="attr">type</span>=<span class="string">"Sitecore.Owin.Authentication.Services.DefaultTransformation, Sitecore.Owin.Authentication"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">sources</span> <span class="attr">hint</span>=<span class="string">"raw:AddSource"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">claim</span> <span class="attr">name</span>=<span class="string">"idp"</span> <span class="attr">value</span>=<span class="string">"Facebook"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">sources</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">targets</span> <span class="attr">hint</span>=<span class="string">"raw:AddTarget"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">claim</span> <span class="attr">name</span>=<span class="string">"http://schemas.microsoft.com/ws/2008/06/identity/claims/role"</span> <span class="attr">value</span>=<span class="string">"sitecore\Developer"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">targets</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">keepSource</span>&gt;</span>true<span class="tag">&lt;/<span class="name">keepSource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">transformation</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">transformation</span> <span class="attr">name</span>=<span class="string">"fullname"</span> <span class="attr">type</span>=<span class="string">"Sitecore.Owin.Authentication.Services.DefaultTransformation,Sitecore.Owin.Authentication"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">sources</span> <span class="attr">hint</span>=<span class="string">"raw:AddSource"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">claim</span> <span class="attr">name</span>=<span class="string">"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">sources</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">targets</span> <span class="attr">hint</span>=<span class="string">"raw:AddTarget"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">claim</span> <span class="attr">name</span>=<span class="string">"FullName"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">targets</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">transformation</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;/<span class="name">transformations</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">identityProvider</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">identityProvider</span> <span class="attr">id</span>=<span class="string">"Google"</span> <span class="attr">type</span>=<span class="string">"Sitecore.Owin.Authentication.Configuration.DefaultIdentityProvider, Sitecore.Owin.Authentication"</span>&gt;</span></span><br><span class="line">          ...</span><br><span class="line">          ...</span><br><span class="line">        <span class="tag">&lt;/<span class="name">identityProvider</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">identityProviders</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">propertyInitializer</span> <span class="attr">type</span>=<span class="string">"Sitecore.Owin.Authentication.Services.PropertyInitializer, Sitecore.Owin.Authentication"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- global mappings go here --&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">propertyInitializer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">federatedAuthentication</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">sitecore</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>The DefaultExternalUserBuilder class creates a sequence of user names for a given external user name. It then uses the first of these names that does not already exist in Sitecore. The values in the sequence depend only on the external username and the Sitecore domain configured for the given identity provider. <sup><a href="#default-external-user-builder">1</a></sup></p>
</blockquote>
<p>If you want to use another claim from the user instead, and you know it’s going to be unique, you can create your own processor and use whatever claim you like. Example below:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class CustomExternalUserBuilder : Sitecore.Owin.Authentication.Services.DefaultExternalUserBuilder</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomExternalUserBuilder</span>(<span class="params"><span class="keyword">bool</span> isPersistentUser</span>)</span></span><br><span class="line"><span class="function">        : <span class="title">base</span>(<span class="params">isPersistentUser</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomExternalUserBuilder</span>(<span class="params"><span class="keyword">string</span> isPersistentUser</span>)</span></span><br><span class="line"><span class="function">        : <span class="title">base</span>(<span class="params"><span class="keyword">bool</span>.Parse(isPersistentUser</span>))</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">string</span> <span class="title">CreateUniqueUserName</span>(<span class="params">UserManager&lt;ApplicationUser&gt; userManager, ExternalLoginInfo externalLoginInfo</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Assert.ArgumentNotNull(userManager, <span class="string">"userManager"</span>);</span><br><span class="line">        Assert.ArgumentNotNull(externalLoginInfo, <span class="string">"externalLoginInfo"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> externalLoginInfo.ExternalIdentity.FindFirstValue(<span class="string">"FullName"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Federated authentication supports two types of users:<br>Persistent users – Sitecore stores information about persistent users (login name, email address, and so on) in the database, and uses the Membership provider by default<br>Virtual users – information about these users is stored in the session and disappears after the session is over. <sup><a href="#authentication-types">2</a></sup></p>
</blockquote>
<p>The transformations above are doing 2 simple things. The first one <code>map role to idp</code> is adding the role <code>sitecore\Developer</code> to the user when its <code>idp</code> claim is equal to <code>Facebook</code>. This claim is added automatically by sitecore because of the shared claim transformation <code>setIdpClaim</code> under <code>&lt;sharedTransformations&gt;</code> in <code>Sitecore.Owin.Authentication.config</code>.</p>
<p>The other one, <code>fullname</code>, is just transforming the claim to <code>FullName</code> so you can retrieve easier programmatically (this is just an example and not actually being used).</p>
<p>The identity provider <code>id</code> must match the <code>IdentityProviderName</code> in your provider processor.</p>
<h2 id="Create-providers’-processors-to-map-claims-received-to-Sitecore-user-properties-and-roles"><a href="#Create-providers’-processors-to-map-claims-received-to-Sitecore-user-properties-and-roles" class="headerlink" title="Create providers’ processors to map claims received to Sitecore user properties and roles"></a>Create providers’ processors to map claims received to Sitecore user properties and roles</h2><p>Create a processor (per provider) that inherits from <code>IdentityProvidersProcessor</code> and maps the claims received.</p>
<p>This implementation uses middlewares created by Microsoft. Nuget packages: <a href="https://www.nuget.org/packages/Microsoft.Owin.Security.Google/" target="_blank" rel="noopener">google,</a> <a href="https://www.nuget.org/packages/Microsoft.Owin.Security.Facebook/" target="_blank" rel="noopener">facebook</a>. Again, only showing facebook’s implementation as google’s is very similar. You can find full source code <a href="https://github.com/josedbaez/sitecore9sso/tree/master/Pipelines/IdentityProviders" target="_blank" rel="noopener">here</a>.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FacebookIdentityProvider</span> : <span class="title">IdentityProvidersProcessor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">string</span> IdentityProviderName =&gt; <span class="string">"Facebook"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">string</span> AppId = <span class="string">"app id from facebook app"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">string</span> AppSecret = <span class="string">"app secret from facebook app"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FacebookIdentityProvider</span>(<span class="params">FederatedAuthenticationConfiguration federatedAuthenticationConfiguration</span>)</span></span><br><span class="line"><span class="function">        : <span class="title">base</span>(<span class="params">federatedAuthenticationConfiguration</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">ProcessCore</span>(<span class="params">IdentityProvidersArgs args</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Assert.ArgumentNotNull(args, <span class="string">"args"</span>);</span><br><span class="line">        IdentityProvider identityProvider = <span class="keyword">this</span>.GetIdentityProvider();</span><br><span class="line">        <span class="keyword">var</span> provider = <span class="keyword">new</span> Microsoft.Owin.Security.Facebook.FacebookAuthenticationProvider</span><br><span class="line">        &#123;</span><br><span class="line">            OnAuthenticated = (context) =&gt;</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//map claims</span></span><br><span class="line">                context.Identity.ApplyClaimsTransformations(<span class="keyword">new</span> TransformationContext(<span class="keyword">this</span>.FederatedAuthenticationConfiguration, identityProvider));</span><br><span class="line">                <span class="keyword">return</span> Task.CompletedTask;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> fbAuthOptions = <span class="keyword">new</span> Microsoft.Owin.Security.Facebook.FacebookAuthenticationOptions</span><br><span class="line">        &#123;</span><br><span class="line">            AppId = AppId,</span><br><span class="line">            AppSecret = AppSecret,</span><br><span class="line">            Provider = provider,</span><br><span class="line">            AuthenticationType = IdentityProvider.Name</span><br><span class="line">        &#125;;</span><br><span class="line">        args.App.UseFacebookAuthentication(fbAuthOptions);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The code is straight forward and microsoft’s middleware does most of the work. Once the user is authenticated and sent back to our site, we need to map the claims. We are doing this with sitecore’s <code>ApplyClaimsTransformations</code> helper. This will map the claims and transform them according to the transformations defined in our configuration file.</p>
<p>Do not forget to update <code>AppId</code> and <code>AppSecret</code>.</p>
<h2 id="Create-rendering-to-render-login-links"><a href="#Create-rendering-to-render-login-links" class="headerlink" title="Create rendering to render login links"></a>Create rendering to render login links</h2><p>Create a controller rendering in sitecore and assign its controller to the following. It gets the login providers that have been configure for the site <code>website</code> and return the list of links.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Sitecore9SSO.Controllers</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">using</span> System.Web.Mvc;</span><br><span class="line">    <span class="keyword">using</span> Sitecore.Pipelines.GetSignInUrlInfo;</span><br><span class="line">    <span class="keyword">using</span> Sitecore.Abstractions;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LoginLinksController</span> : <span class="title">Controller</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> ActionResult <span class="title">Index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="comment">//get url to redirect to</span></span><br><span class="line">            <span class="keyword">var</span> url = <span class="string">"/"</span>;</span><br><span class="line">            <span class="keyword">if</span>(!<span class="keyword">string</span>.IsNullOrEmpty(Request.QueryString?[<span class="string">"item"</span>]))</span><br><span class="line">                url = Request.QueryString[<span class="string">"item"</span>];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> corePipelineManager = DependencyResolver.Current.GetService&lt;BaseCorePipelineManager&gt;();</span><br><span class="line">            <span class="keyword">var</span> args = <span class="keyword">new</span> GetSignInUrlInfoArgs(<span class="string">"website"</span>, url);</span><br><span class="line">            GetSignInUrlInfoPipeline.Run(corePipelineManager, args);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> View(<span class="string">"/Views/LoginLinks.cshtml"</span>, args.Result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Create a view to render the links.<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@using Sitecore</span><br><span class="line">@using Sitecore.Mvc</span><br><span class="line"></span><br><span class="line">@model IEnumerable<span class="tag">&lt;<span class="name">Sitecore.Data.SignInUrlInfo</span>&gt;</span></span><br><span class="line"></span><br><span class="line">@foreach (var signIn in Model)</span><br><span class="line">&#123;</span><br><span class="line">    using (Html.BeginForm(null, null, FormMethod.Post, new &#123; @action = signIn.Href &#125;))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"@signIn.Icon"</span> /&gt;</span></span><br><span class="line">            @signIn.Caption</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>That’s it. If you remove <code>extranet\anonymous</code> access to an item and allow access to <code>sitecore\developer</code> role, <code>anonymous</code> users will be redirected to <code>no-access</code> page (created above) and the login links will be shown.</p>
<p><img class="" src="/images/login-links.png" alt="Login List"></p>
<p>====================<br>References:<br><a name="default-external-user-builder" href="https://doc.sitecore.net/sitecore_experience_platform/developing/developing_with_sitecore/federated_authentication/configure_federated_authentication" target="_blank" rel="noopener">https://doc.sitecore.net/sitecore_experience_platform/developing/developing_with_sitecore/federated_authentication/configure_federated_authentication</a><br><a name="authentication-types" href="https://doc.sitecore.net/sitecore_experience_platform/developing/developing_with_sitecore/federated_authentication/using_federated_authentication_with_sitecore" target="_blank" rel="noopener">https://doc.sitecore.net/sitecore_experience_platform/developing/developing_with_sitecore/federated_authentication/using_federated_authentication_with_sitecore</a><br><a href="https://docs.microsoft.com/en-us/aspnet/core/security/authentication/social/facebook-logins?tabs=aspnetcore2x" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/aspnet/core/security/authentication/social/facebook-logins?tabs=aspnetcore2x</a><br><a href="https://docs.microsoft.com/en-us/aspnet/core/security/authentication/social/google-logins?tabs=aspnetcore2x" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/aspnet/core/security/authentication/social/google-logins?tabs=aspnetcore2x</a></p>
<hr>
<p>Please let me know what you think and/or if you can spot any errors.<br><em>/eom</em></p>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://josedbaez.com/2018/03/sitecore9-sso/" data-id="cjug3agw60015uz994cfs90j1" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/josedbaez" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="stack-overflow" href="https://stackoverflow.com/users/991459/josedbaez" target="_blank" rel="noopener">
                        <i class="icon fa fa-stack-overflow"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="stack-exchange" href="http://sitecore.stackexchange.com/users/88/josedbaez" target="_blank" rel="noopener">
                        <i class="icon fa fa-stack-exchange"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/atom.xml" target="_blank" rel="noopener">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2018/04/sitecore9-okta-login/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            Log in to sitecore 9 editor using Okta provider
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2017/11/application-insights-logger/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">Application insights logger</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        <div class="widget-wrap highlights">                
            <div class="widget">
                <a href="https://www.sitecore.com/mvp" target="_blank">
                    <img class="award" src="/images/mvp.gif" alt="Example of supported cultures table" />
                </a>
            </div>
        </div>
        
            
                
    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/04/sitecore-add-non-listed-language/" class="thumbnail">
    
    
        <span style="background-image:url(/images/greetings-sitecore_th.jpg)" alt="Add a non-listed language to Sitecore" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Sitecore/">Sitecore</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Sitecore/Globalization/">Globalization</a></p>
                            <p class="item-title"><a href="/2019/04/sitecore-add-non-listed-language/" class="title">Add a non-listed language to Sitecore</a></p>
                            <p class="item-date"><time datetime="2019-04-13T00:00:00.000Z" itemprop="datePublished">2019-04-13</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/04/supported-cultures/" class="thumbnail">
    
    
        <span style="background-image:url(/images/greetings.png)" alt="Supported cultures on server" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Globalization/">Globalization</a></p>
                            <p class="item-title"><a href="/2019/04/supported-cultures/" class="title">Supported cultures on server</a></p>
                            <p class="item-date"><time datetime="2019-04-10T00:00:00.000Z" itemprop="datePublished">2019-04-10</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/12/querystring-cache-size/" class="thumbnail">
    
    
        <span style="background-image:url(/images/querystring-cache_th.jpg)" alt="Increase querystring cache size" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Sitecore/">Sitecore</a></p>
                            <p class="item-title"><a href="/2018/12/querystring-cache-size/" class="title">Increase querystring cache size</a></p>
                            <p class="item-date"><time datetime="2018-12-09T00:00:00.000Z" itemprop="datePublished">2018-12-09</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/11/media-always-append-revision-bug/" class="thumbnail">
    
    
        <span style="background-image:url(/images/alwaysappendrevision-bug_th.jpg)" alt="Media.AlwaysAppendRevision - Unrecognized Guid" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Sitecore/">Sitecore</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Sitecore/Azure/">Azure</a></p>
                            <p class="item-title"><a href="/2018/11/media-always-append-revision-bug/" class="title">Media.AlwaysAppendRevision - Unrecognized Guid</a></p>
                            <p class="item-date"><time datetime="2018-11-19T00:00:00.000Z" itemprop="datePublished">2018-11-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/10/azure-application-gateway-client-ip/" class="thumbnail">
    
    
        <span style="background-image:url(/images/application-gateway-xforwardedfor_th.jpg)" alt="Reading user&#39;s ip address behind Azure Application Gateway" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Sitecore/">Sitecore</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Sitecore/Azure/">Azure</a></p>
                            <p class="item-title"><a href="/2018/10/azure-application-gateway-client-ip/" class="title">Reading user&#39;s ip address behind Azure Application Gateway</a></p>
                            <p class="item-date"><time datetime="2018-10-19T00:00:00.000Z" itemprop="datePublished">2018-10-19</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Configuration/">Configuration</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Globalization/">Globalization</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sitecore/">Sitecore</a><span class="category-list-count">18</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Sitecore/Authentication/">Authentication</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sitecore/Azure/">Azure</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sitecore/CRM/">CRM</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sitecore/EXM/">EXM</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sitecore/Field-Types/">Field Types</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Sitecore/Field-Types/Synthesis/">Synthesis</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sitecore/Globalization/">Globalization</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sitecore/Log4net/">Log4net</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sitecore/Synthesis/">Synthesis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sitecore/WFFM/">WFFM</a><span class="category-list-count">1</span></li></ul></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">3</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/assembly/">assembly</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/authentication/">authentication</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/azure/">azure</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bindingredirect/">bindingredirect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bug/">bug</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cache/">cache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cdn/">cdn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/commerce/">commerce</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dynamics/">dynamics</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/encryption/">encryption</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/exm/">exm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/facebook/">facebook</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fieldtypes/">fieldtypes</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gateway/">gateway</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/generallink/">generallink</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/globalization/">globalization</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/helper/">helper</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/insights/">insights</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linklist/">linklist</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/log4net/">log4net</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logs/">logs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/multilingual/">multilingual</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/okta/">okta</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openid/">openid</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/patch/">patch</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/">security</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sitecore/">sitecore</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sso/">sso</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/synthesis/">synthesis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webconfig/">webconfig</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wffm/">wffm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xdb/">xdb</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xff/">xff</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2019 José Domínguez</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

        
    
    <script>
    var disqus_shortname = 'josedbaez';
    
    
    var disqus_url = 'http://josedbaez.com/2018/03/sitecore9-sso/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
